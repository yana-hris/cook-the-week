@model UserProfileViewModel
@{
    ViewData["Title"] = "Profile";

    PageHeadingViewModel headingModel = new PageHeadingViewModel
    {
        Subheading = "User Profile",
        HeadingSecondary = "Manage Your Account"
    };
}
<div class="card-outer-container" id="user-profile">
    <partial name="_HeadingPartial" model="headingModel" />
    <div class="card-container h-100 d-flex align-items-stretch justify-content-center">
        
        <img src="~/img/user-profile-food.webp"
                alt="Prepared Meal Image"
                class="card-img img-fluid" />
        <div class="profile-container d-flex flex-column align-items-center justify-content-start">
            <div class="container info-container mb-4">   
                <div class="row">
                    <div class=" stat col-md-6 my-2">                        
                        <h5>
                            <i class="fas fa-user"></i> Username
                        </h5>
                        <p class="info-style">@Model.UserName</p>
                    </div>
                    <div class="col-md-6 my-2">
                        <h5>
                            <i class="fas fa-envelope"></i> Email
                        </h5>
                        <p class="info-style">@Model.Email</p>                       
                    </div>
                    <div class="col-12 col-md-6 my-2">
                        @if(Model.HasPassword)
                        {
                            <button href="@Url.Action("ChangePassword", "User")" class="change-password">Change Password</button>
                        }
                        else
                        {
                            <button href="@Url.Action("SetPassword", "User")" class="set-password-btn">Set Password</button>
                        }

                    </div>
                    <div class="col-12 col-md-6 my-2">
                        <button data-bs-toggle="modal" data-bs-target="#deleteConfirmationModal" class="delete-account-btn" type="button">
                            Delete Account
                        </button>
                       
                    </div>
                </div>
                <div class="row">
                    @if (!Model.HasPassword)
                    {
                        <p class="small text-danger">You don't have a password set up for your account. You can create one here.</p>
                    }
                    @* else
                    {
                        <p class="small">You have a password set up for your account.</p>
                    } *@
                </div>
            </div>
            <div class="container actions-container mb-2">                
                <h5>
                    Explore your collections
                </h5>
                <div class="row">
                    <div class="col-12 col-md-6 my-2">
                        <h5>
                            <i class="fa-solid fa-folder"></i> @Model.RecipesCount Recipe(s)
                        </h5>
                    </div>
                    <div class="col-12 col-md-6 my-2">
                        <h5>
                            <i class="fa-solid fa-inbox"></i> @Model.MealplansCount Mealplan(s)
                        </h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-md-6 mb-4">
                        <a href="@Url.Action("Mine", "Recipe")" class="user-recipes-btn">To Recipes</a>
                    </div>
                    <div class="col-12 col-md-6 mb-4">
                        <a href="@Url.Action("Mine", "MealPlan")" class="user-mealplans-btn">To Mealplans</a>
                    </div>
                </div>
                
            </div>
        </div>
         
    </div>
    <!-- Modal HTML -->
    <div class="modal fade" id="deleteConfirmationModal" tabindex="-1" aria-labelledby="deleteConfirmationModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content text-center">
                <div class="modal-body d-flex flex-column aling-items-center justify-content-center gap-2">
                    <span><i class="fa-solid fa-triangle-exclamation"></i></span>
                    <h2>Are you sure you want to delete your account?</h2>
                    <p>This action is permanent and cannot be undone. Deleting your account will remove all your data and any associated content. </p>
                    <div class="buttons d-flex flex-column gap-2">
                        <form asp-area="" asp-controller="User" asp-action="DeleteAccount" method="post" class="w-100">
                            <button type="submit" class="btn btn-outline-danger w-100 text-center">Delete</button>
                        </form>
                        <button type="button" class="btn btn-light w-100 text-center" data-bs-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
