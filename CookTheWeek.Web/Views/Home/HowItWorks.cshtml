@{
    ViewData["Title"] = "How It Works";
    var headingModel = new PageHeadingViewModel
        {
            Subheading = "How It Works",
            HeadingSecondary = "Your weekly meals in 4 simple steps"
        };
}


<div id="how-it-works" class="wide-contents-container">
    <partial name="_HeadingPartial" model=headingModel />

    <div id="steps-container">

        @* STEP 01 *@     
        <div class="step-text-box">
            <p class="step-number">01</p>
            <p class="heading-tertiary">Pick Recipes</p>
            <p class="step-description">
                Browse through our extensive collection of delicious recipes from various cuisines and categories. Whether you're looking for quick weekday dinners, healthy options, or indulgent treats, we have something for everyone.
            </p>
        </div>

        <div class="step-img-box">
            <img id="theme-image-1" 
                 src="/img/Screenshot_1_light-compressed.webp"
                 data-light="/img/Screenshot_1_light-compressed.webp"
                 data-dark="/img/Screenshot_1_dark-compressed.webp"
                 class="step-img"
                 loading="lazy"
                 alt="Recipe browsing screenshot" 
                 style="cursor: pointer;"
            />
        </div> 

        @* STEP 02 *@
        <div class="step-img-box">
            <img id="theme-image-2"
                 src="/img/Screenshot_2_light-compressed.webp"
                 data-light="/img/Screenshot_2_light-compressed.webp"
                 data-dark="/img/Screenshot_2_dark-compressed.webp"
                 class="step-img"
                 loading="lazy"
                 alt="Meal plan setup screenshot" />
        </div>

        <div class="step-text-box">
            <p class="step-number">02</p>
            <p class="heading-tertiary">Plan Your Meals</p>
            <p class="step-description">
                Once you've found recipes you love, add them to your meal plan for the week. Our intuitive meal planner makes it easy to organize your meals and create a customized plan based on your dietary preferences, schedule, and family size.
            </p>
        </div>
        
        @* STEP 03 *@
        <div class="step-text-box">
            <p class="step-number">03</p>
            <p class="heading-tertiary">Go Shopping on Point</p>
            <p class="step-description">
                Discover the convenience of our app by creating personalized shopping lists based on your meal plans. Streamline your grocery shopping experience, save time, and ensure you have all the ingredients you need. Start organizing your meals today!
            </p>
        </div>

        <div class="step-img-box">
            <img id="theme-image-3"
                 src="/img/Screenshot_3_light-compressed.webp"
                 data-light="/img/Screenshot_3_light-compressed.webp"
                 data-dark="/img/Screenshot_3_dark-compressed.webp"
                 class="step-img"
                 alt="Shopping list screenshot" />
        </div>

        @* STEP 04 *@
        <div class="step-img-box">
            <img id="theme-image-4"
                 src="/img/Screenshot_4_light-compressed.webp"
                 data-light="/img/Screenshot_4_light-compressed.webp"
                 data-dark="/img/Screenshot_4_dark-compressed.webp"
                 class="step-img"
                 alt="Cooking Instructions screenshot" />
        </div>

        <div class="step-text-box">
            <p class="step-number">04</p>
            <p class="heading-tertiary">Enjoy Cooking</p>
            <p class="step-description">
                Follow the step-by-step instructions in each recipe to whip up tasty meals in your kitchen. With clear ingredient lists and cooking directions, you'll be able to recreate restaurant-quality dishes right at home. Get creative, experiment with flavors, and have fun cooking delicious meals for yourself and your loved ones
            </p>
        </div>        
    </div>
</div>

@* <div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="imageModalLabel">Image Preview</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center">
                <button id="prevImage" class="btn btn-secondary position-absolute top-50 start-0 translate-middle-y" style="z-index: 1050;">
                    &#8592; Previous
                </button>
                <img id="modalImage" src="" class="img-fluid" alt="Large View">
                <button id="nextImage" class="btn btn-secondary position-absolute top-50 end-0 translate-middle-y" style="z-index: 1050;">
                    Next &#8594;
                </button>
            </div>
        </div>
    </div>
</div> *@

@section Scripts {
    <script>
            $(document).ready(function () {
            // Get all images in the step-img-box
            const images = $('.step-img');
            let currentIndex = 0; // To track the currently displayed image

            // Function to open the modal with the selected image
            function openModal(index) {
                currentIndex = index;

                // Determine the theme (light or dark)
                const isDarkMode = document.documentElement.getAttribute('data-bs-theme') === 'dark';

                // Get the correct image source based on the theme
                const imageUrl = isDarkMode ? $(images[index]).data('dark') : $(images[index]).data('light');

                // Update the modal image
                $('#modalImage').attr('src', imageUrl);

                // Show the modal
                $('#imageModal').modal('show');
            }

            // Add click event to all images
            images.on('click', function () {
                const index = images.index(this);
                openModal(index);
            });

            // Handle Next button
            $('#nextImage').on('click', function () {
                if (currentIndex < images.length - 1) {
                    openModal(currentIndex + 1);
                }
            });

            // Handle Previous button
            $('#prevImage').on('click', function () {
                if (currentIndex > 0) {
                    openModal(currentIndex - 1);
                }
            });
        });
    </script>
}